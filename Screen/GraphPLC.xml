<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0201">
  <fileHeader companyName="Danfoss" productName="PLUS+1 GUIDE" productVersion="2024.2.4.6047" creationDateTime="2025-03-20T18:24:18"/>
  <contentHeader name="" modificationDateTime="2025-04-02T01:43:22">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1"/>
      </fbd>
      <ld>
        <scaling x="1" y="1"/>
      </ld>
      <sfc>
        <scaling x="1" y="1"/>
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="FileFormat" handleUnknown="discard">
        <FileFormat>001F</FileFormat>
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes/>
    <pous>
      <pou name="GraphPOU" pouType="function">
        <interface>
          <returnType>
            <DINT/>
          </returnType>
          <inputVars>
            <variable name="Update">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="Divisor">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="CurValue">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="MaxValue">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="MinValue">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="PrevState">
              <type>
                <array>
                  <dimension lower="0" upper="20"/>
                  <baseType>
                    <DINT/>
                  </baseType>
                </array>
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="NextState">
              <type>
                <array>
                  <dimension lower="0" upper="20"/>
                  <baseType>
                    <DINT/>
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="Item0">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item1">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item2">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item3">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item4">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item5">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item6">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item7">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item8">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item9">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item10">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item11">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item12">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item13">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item14">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item15">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item16">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item17">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item18">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item19">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Item20">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver0">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver1">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver2">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver3">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver4">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver5">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver6">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver7">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver8">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver9">
              <type>
                <DINT/>
              </type>
            </variable>
            <variable name="Ver10">
              <type>
                <DINT/>
              </type>
            </variable>
          </outputVars>
        </interface>
        <body>
          <C>
            <code xmlns="http://www.w3.org/1999/xhtml">//Write the C Code function body here.
//You have access to everything defined in any of the available header files listed under the PLC Units node in the Project Manager
CurValue /= Divisor;
MaxValue /= Divisor;
MinValue /= Divisor;
int dif = MaxValue - MinValue;
if(Update){
  for(int i = 0; i &lt; 20; i++){
    NextState[i] = PrevState[i+1];
  }
  NextState[20] = 305 - 300 * (CurValue - MinValue) / dif;
}
else{
  for(int i = 0; i &lt; 21; i++){
    NextState[i] = PrevState[i];
  }
}
for(int i = 0; i &lt; 21; i++){
  if(NextState[i] == 0){
    NextState[i] = 305;
  }
}

*Item0 = NextState[0];
*Item1 = NextState[1];
*Item2 = NextState[2];
*Item3 = NextState[3];
*Item4 = NextState[4];
*Item5 = NextState[5];
*Item6 = NextState[6];
*Item7 = NextState[7];
*Item8 = NextState[8];
*Item9 = NextState[9];
*Item10 = NextState[10];
*Item11 = NextState[11];
*Item12 = NextState[12];
*Item13 = NextState[13];
*Item14 = NextState[14];
*Item15 = NextState[15];
*Item16 = NextState[16];
*Item17 = NextState[17];
*Item18 = NextState[18];
*Item19 = NextState[19];
*Item20 = NextState[20];

*Ver0 = MinValue;
*Ver1 = MinValue + dif/10;
*Ver2 = MinValue + 2 * dif/10;
*Ver3 = MinValue + 3 * dif/10;
*Ver4 = MinValue + 4 * dif/10;
*Ver5 = MinValue + 5 * dif/10;
*Ver6 = MinValue + 6 * dif/10;
*Ver7 = MinValue + 7 * dif/10;
*Ver8 = MinValue + 8 * dif/10;
*Ver9 = MinValue + 9 * dif/10;
*Ver10 = MaxValue;</code>
          </C>
        </body>
        <addData>
          <data name="InterfaceText" handleUnknown="discard">
            <code>FUNCTION GraphPOU : DINT
VAR_INPUT
  Update : BOOL;
  Divisor : DINT;
  CurValue : DINT;
  MaxValue : DINT;
  MinValue : DINT;
  PrevState : ARRAY[0..20] OF DINT;
END_VAR
VAR_OUTPUT
  NextState : ARRAY[0..20] OF DINT;
  Item0 : DINT;
  Item1 : DINT;
  Item2 : DINT;
  Item3 : DINT;
  Item4 : DINT;
  Item5 : DINT;
  Item6 : DINT;
  Item7 : DINT;
  Item8 : DINT;
  Item9 : DINT;
  Item10 : DINT;
  Item11 : DINT;
  Item12 : DINT;
  Item13 : DINT;
  Item14 : DINT;
  Item15 : DINT;
  Item16 : DINT;
  Item17 : DINT;
  Item18 : DINT;
  Item19 : DINT;
  Item20 : DINT;
  Ver0 : DINT;
  Ver1 : DINT;
  Ver2 : DINT;
  Ver3 : DINT;
  Ver4 : DINT;
  Ver5 : DINT;
  Ver6 : DINT;
  Ver7 : DINT;
  Ver8 : DINT;
  Ver9 : DINT;
  Ver10 : DINT;
END_VAR

</code>
          </data>
          <data name="notYetVerified" handleUnknown="discard">False</data>
        </addData>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations/>
  </instances>
</project>
